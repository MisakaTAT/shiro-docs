import{_ as s,c as a,o as n,a as l}from"./app.2ff9a75d.js";const i=JSON.parse('{"title":"\u8FC1\u79FB\u6307\u5357","description":"","frontmatter":{},"headers":[{"level":2,"title":"v1 \u27A1\uFE0F v2","slug":"v1-\u27A1\uFE0F-v2","link":"#v1-\u27A1\uFE0F-v2","children":[{"level":3,"title":"BotPlugin","slug":"botplugin","link":"#botplugin","children":[]},{"level":3,"title":"ArrayMsg","slug":"arraymsg","link":"#arraymsg","children":[]},{"level":3,"title":"MessageHandler","slug":"messagehandler","link":"#messagehandler","children":[]}]},{"level":2,"title":"v2.0.9 \u27A1\uFE0F v2.1.0","slug":"v2-0-9-\u27A1\uFE0F-v2-1-0","link":"#v2-0-9-\u27A1\uFE0F-v2-1-0","children":[]},{"level":2,"title":"v2.1.8 \u27A1\uFE0F v2.2.0","slug":"v2-1-8-\u27A1\uFE0F-v2-2-0","link":"#v2-1-8-\u27A1\uFE0F-v2-2-0","children":[]}],"relativePath":"migration.md","lastUpdated":1715045950000}'),p={name:"migration.md"},o=l(`<h1 id="\u8FC1\u79FB\u6307\u5357" tabindex="-1">\u8FC1\u79FB\u6307\u5357 <a class="header-anchor" href="#\u8FC1\u79FB\u6307\u5357" aria-hidden="true">#</a></h1><h2 id="v1-\u27A1\uFE0F-v2" tabindex="-1">v1 \u27A1\uFE0F v2 <a class="header-anchor" href="#v1-\u27A1\uFE0F-v2" aria-hidden="true">#</a></h2><h3 id="botplugin" tabindex="-1">BotPlugin <a class="header-anchor" href="#botplugin" aria-hidden="true">#</a></h3><blockquote><p>\u79FB\u9664 <code>BotPlugin</code> \u4E2D\u6240\u6709\u65B9\u6CD5\u7684 <code>@NotNull</code> \u6CE8\u89E3</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v1</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onAnyMessage</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Bot</span><span style="color:#A6ACCD;"> bot</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">AnyMessageEvent</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> MESSAGE_IGNORE</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v2</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onAnyMessage</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Bot</span><span style="color:#A6ACCD;"> bot</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">AnyMessageEvent</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> MESSAGE_IGNORE</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="arraymsg" tabindex="-1">ArrayMsg <a class="header-anchor" href="#arraymsg" aria-hidden="true">#</a></h3><blockquote><p>\u5143\u7D20\u7684\u7C7B\u578B\u7531\u5B57\u7B26\u4E32\u53D8\u66F4\u4E3A\u679A\u4E3E</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v1</span></span>
<span class="line"><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getArrayMsg</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">it </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">image</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getType</span><span style="color:#89DDFF;">()))</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">it </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)));</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v2</span></span>
<span class="line"><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getArrayMsg</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">it </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> MsgTypeEnum</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">image </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getType</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">it </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">it</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)));</span></span>
<span class="line"></span></code></pre></div><h3 id="messagehandler" tabindex="-1">MessageHandler <a class="header-anchor" href="#messagehandler" aria-hidden="true">#</a></h3><blockquote><p><code>@MessageHandler</code> \u6CE8\u89E3\u53D8\u66F4\u4E3A <code>@AnyMessageHandler</code></p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v1</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">MessageHandler</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Bot</span><span style="color:#A6ACCD;"> bot</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">AnyMessageEvent</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v2</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AnyMessageHandler</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Bot</span><span style="color:#A6ACCD;"> bot</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">AnyMessageEvent</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><h2 id="v2-0-9-\u27A1\uFE0F-v2-1-0" tabindex="-1">v2.0.9 \u27A1\uFE0F v2.1.0 <a class="header-anchor" href="#v2-0-9-\u27A1\uFE0F-v2-1-0" aria-hidden="true">#</a></h2><blockquote><p>\u65B0\u589E <code>@MessageHandlerFilter</code> \u6CE8\u89E3</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v2.0.9</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AnyMessageHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">say hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Bot</span><span style="color:#A6ACCD;"> bot</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">AnyMessageEvent</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// v2.1.0</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AnyMessageHandler</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">MessageHandlerFilter</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">say hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fun</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Bot</span><span style="color:#A6ACCD;"> bot</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">AnyMessageEvent</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><h2 id="v2-1-8-\u27A1\uFE0F-v2-2-0" tabindex="-1">v2.1.8 \u27A1\uFE0F v2.2.0 <a class="header-anchor" href="#v2-1-8-\u27A1\uFE0F-v2-2-0" aria-hidden="true">#</a></h2><blockquote><p>\u5728\u7248\u672C <code>v2.1.9</code> \u6B63\u5411 <code>WebSocket</code> \u8FDE\u63A5\u6A21\u5F0F\u4E0B\u5B58\u5728 <code>Session</code> \u88AB\u5F02\u5E38\u5173\u95ED\u5BFC\u81F4\u7684\u6D88\u606F\u53D1\u9001\u5931\u8D25\u7684\u95EE\u9898</p></blockquote><blockquote><p>\u65B0\u589E\u6B63\u5411 <code>WebSocket</code> \u8FDE\u63A5\u652F\u6301</p></blockquote><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki"><code><span class="line"><span style="color:#C3E88D;">// v2.1.8</span></span>
<span class="line"><span style="color:#676E95;"># \u8BE5\u914D\u7F6E\u4E3A\u53CD\u5411\u8FDE\u63A5\u793A\u4F8B</span></span>
<span class="line"><span style="color:#F07178;">shiro</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">ws-config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ws-url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/ws/shiro</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki"><code><span class="line"><span style="color:#C3E88D;">// v2.2.0</span></span>
<span class="line"><span style="color:#F07178;">shiro</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">ws</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># \u8BE5\u914D\u7F6E\u4E3A\u6B63\u5411\u8FDE\u63A5\u793A\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">enable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ws://your-domain:port</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># \u8BE5\u914D\u7F6E\u4E3A\u53CD\u5411\u8FDE\u63A5\u793A\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">enable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/ws/shiro</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div>`,23),e=[o];function t(c,r,y,D,F,A){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{i as __pageData,d as default};
